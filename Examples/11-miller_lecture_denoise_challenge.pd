#N struct 1881-template float x float y float c float s float th float stretch array 1881-plus 1881-template-y array 1881-minus 1881-template-y;
#N struct 1881-template-y float y;
#N struct 1882-template float x float y float c float s float th float stretch array 1882-plus 1882-template-y array 1882-minus 1882-template-y;
#N struct 1882-template-y float y;
#N canvas 158 58 1123 762 10;
#X declare -path ./audio;
#X declare -path ..;
#X obj 2 2 cnv 15 380 750 empty empty empty 20 12 0 14 #e0e0e0 #404040 0;
#N canvas 529 337 450 300 init 0;
#X obj 164 32 loadbang;
#X msg 164 95 \; pd dsp 1 \; \$1-vol-denoisedr 80;
#X obj 164 62 f \$0;
#X connect 0 0 2 0;
#X connect 2 0 1 0;
#X restore 17 11 pd init;
#X floatatom 573 439 5 0 0 0 - - - 0;
#X msg 573 461 volume \$1;
#X obj 410 426 pp.out~;
#A saved empty_slot \; empty_slot \; empty_slot \; empty_slot \; empty_slot \; empty_slot \; empty_slot \; empty_slot \; empty_slot \; empty_slot \; empty_slot \; empty_slot \; empty_slot \; empty_slot \; empty_slot \; empty_slot \; empty_slot \; empty_slot \; empty_slot \; empty_slot \; empty_slot \;;
#X obj 409 151 pp.sfplayer~;
#A saved empty_slot \; empty_slot \; empty_slot \; empty_slot \; empty_slot \; empty_slot \; empty_slot \; empty_slot \; empty_slot \; empty_slot \; empty_slot \; empty_slot \; empty_slot \; empty_slot \; empty_slot \; empty_slot \; empty_slot \; empty_slot \; empty_slot \; empty_slot \; empty_slot \;;
#X obj 247 26 declare -path ./audio;
#X obj 277 5 declare -path ..;
#N canvas 2 54 450 300 init 0;
#X obj 203 92 outlet;
#X obj 211 39 loadbang;
#X msg 203 69 open Noisy_lecture.wav \, loop 1;
#X connect 1 0 2 0;
#X connect 2 0 0 0;
#X restore 595 152 pd init;
#X text 17 61 miller lecture denoise challenge;
#X obj 726 19 bng 18 250 50 0 empty empty empty 0 -9 0 10 #ff8300 #000000 #000000;
#X msg 726 153 masking-mode \$1;
#X msg 726 125 1;
#X msg 757 125 2;
#X msg 582 80 position 0 \, stop \, play;
#X obj 410 613 pp.fft-profile~ 512 4;
#A saved empty_slot \; empty_slot \; empty_slot \; empty_slot \; empty_slot \; empty_slot \; empty_slot \; empty_slot \; empty_slot \; empty_slot \; empty_slot \; empty_slot \; empty_slot \; empty_slot \; empty_slot \; empty_slot \; empty_slot \; empty_slot \; empty_slot \; empty_slot \; empty_slot \;;
#X floatatom 573 691 5 0 0 0 - - - 0;
#X msg 573 713 volume \$1;
#X obj 410 678 pp.out~;
#A saved empty_slot \; empty_slot \; empty_slot \; empty_slot \; empty_slot \; empty_slot \; empty_slot \; empty_slot \; empty_slot \; empty_slot \; empty_slot \; empty_slot \; empty_slot \; empty_slot \; empty_slot \; empty_slot \; empty_slot \; empty_slot \; empty_slot \; empty_slot \; empty_slot \;;
#X floatatom 410 533 5 0 0 0 - - - 0;
#X obj 409 553 phasor~ 110;
#X floatatom 862 439 5 0 0 0 - - - 0;
#X msg 862 461 volume \$1;
#X obj 699 426 pp.out~;
#A saved empty_slot \; empty_slot \; empty_slot \; empty_slot \; empty_slot \; empty_slot \; empty_slot \; empty_slot \; empty_slot \; empty_slot \; empty_slot \; empty_slot \; empty_slot \; empty_slot \; empty_slot \; empty_slot \; empty_slot \; empty_slot \; empty_slot \; empty_slot \; empty_slot \;;
#X obj 411 347 s~ denoised;
#X obj 495 347 s~ residual;
#X obj 496 582 r~ denoised;
#X obj 700 390 r~ residual;
#X obj 410 394 r~ denoised;
#X obj 28 184 hsl 200 15 0 100 0 0 \$0-vol-denoised \$0-vol-denoisedr Denoised -2 -8 2 12 #fc8000 #000000 #000000 0 1;
#X obj 573 418 r \$0-vol-denoised;
#X obj 28 251 hsl 200 15 0 100 0 0 \$0-vol-residual \$0-vol-residualr Residual -2 -8 2 12 #fc8000 #000000 #000000 0 1;
#X obj 29 641 hsl 200 15 0 100 0 0 \$0-vol-robot \$0-vol-robotr Robot -2 -8 2 12 #fc8000 #000000 #000000 0 1;
#X obj 862 418 r \$0-vol-residual;
#X obj 573 670 r \$0-vol-robot;
#X obj 757 93 del 1500;
#X obj 410 298 pp.fft-profile~ 4096 4;
#A saved empty_slot \; empty_slot \; empty_slot \; empty_slot \; empty_slot \; empty_slot \; empty_slot \; empty_slot \; empty_slot \; empty_slot \; empty_slot \; empty_slot \; empty_slot \; empty_slot \; empty_slot \; empty_slot \; empty_slot \; empty_slot \; empty_slot \; empty_slot \; empty_slot \;;
#X text 786 126 set to learn and freeze after 1.5 seconds;
#X obj 662 286 cnv 18 350 60 empty empty empty 20 12 0 10 #ff8300 #404040 0;
#X msg 671 300 masking 110 \, learn 1 \, forget 1 \, expand 100 \, restore 2 \, restore-mode 2 \, masking-mode 2 \, treble 4 \, lock 20 \,;
#X text 754 19 1) Play a short part of noise from the beginning of the soundfile to create a noise profile;
#X text 662 239 2) Tweak the parameters until you find a good balance between noise reduction and the character of the denoised sound. Here is what I came up with:;
#X obj 610 585 cnv 18 390 60 empty empty empty 20 12 0 10 #ff8300 #404040 0;
#X msg 615 600 masking 100 \, learn 1 \, forget 0.25 \, expand 100 \, restore 500 \, restore-mode 1 \, masking-mode 0 \, treble 0 \, lock 20 \,;
#X text 611 535 3) Now we can use the denoised voice as a modulator for a vocoder. "masking-mode" is set to "slew" and we listen to the residual part of the filtered sound;
#X connect 2 0 3 0;
#X connect 3 0 4 2;
#X connect 5 0 36 0;
#X connect 5 0 36 1;
#X connect 8 0 5 3;
#X connect 10 0 14 0;
#X connect 10 0 12 0;
#X connect 10 0 35 0;
#X connect 11 0 36 2;
#X connect 12 0 11 0;
#X connect 13 0 11 0;
#X connect 14 0 5 3;
#X connect 15 1 18 0;
#X connect 15 1 18 1;
#X connect 16 0 17 0;
#X connect 17 0 18 2;
#X connect 19 0 20 0;
#X connect 20 0 15 0;
#X connect 21 0 22 0;
#X connect 22 0 23 2;
#X connect 26 0 15 1;
#X connect 27 0 23 1;
#X connect 27 0 23 0;
#X connect 28 0 4 0;
#X connect 28 0 4 1;
#X connect 30 0 2 0;
#X connect 33 0 21 0;
#X connect 34 0 16 0;
#X connect 35 0 13 0;
#X connect 36 0 24 0;
#X connect 36 1 25 0;
#X connect 39 0 36 2;
#X connect 43 0 15 2;
